<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OxeMaps - Itamarac√°</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <style>
        body { background: #3b82f6; font-family: 'Arial', sans-serif; overflow-x: hidden; margin: 0; }
        #main { display: flex; flex-direction: column; min-height: 100vh; padding: 20px; margin-left: 0; transition: margin-left 0.4s; }
        h1 { color: #fff; text-align: center; margin-top: 50px; font-size: 4rem; font-family: 'Fredoka One', cursive; text-shadow: 3px 3px 6px rgba(0,0,0,0.3); animation: bounceTitle 2s infinite; }
        @keyframes bounceTitle { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        .description { color: #fefefe; text-align: center; font-size: 1.5rem; margin-top: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }

        .sidebar { position: fixed; top: 0; left: -250px; width: 250px; height: 100%; background-color: #2563EB; padding-top: 60px; transition: 0.4s; box-shadow: 3px 0 10px rgba(0,0,0,0.2); z-index: 1000; display: flex; flex-direction: column; }
        .sidebar a { display: flex; align-items: center; padding: 15px 25px; text-decoration: none; color: #fff; font-size: 1.2rem; transition: 0.3s; }
        .sidebar a i { margin-right: 10px; font-size: 1.5rem; }
        .sidebar a:hover { background-color: #1e40af; border-radius: 8px; }
        .sidebar.active { left: 0; }
        .open-btn { position: fixed; top: 20px; left: 20px; font-size: 24px; background-color: #2563EB; color: #fff; border: none; padding: 10px 15px; cursor: pointer; border-radius: 8px; z-index: 1100; transition: 0.3s; }
        .open-btn:hover { background-color: #1e40af; }

        .footer { background-color: #1e40af; color: #fff; position: relative; bottom: 0; width: 100%; box-shadow: 0 -3px 10px rgba(0,0,0,0.2); padding: 15px 0; }

        #map { height: 500px; width: 100%; margin-top: 50px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.3); position: relative; }

        .leaflet-popup-content-wrapper { max-width: 270px !important; border-radius: 14px !important; background: rgba(255,255,255,0.95); box-shadow: 0 4px 15px rgba(0,0,0,0.25); backdrop-filter: blur(6px); font-family: "Segoe UI", Arial, sans-serif; color: #222; padding: 8px; }
        .leaflet-popup-content h5 { font-size: 1rem; margin-bottom: 6px; font-weight: bold; color: #2c3e50; text-align: center; }
        .leaflet-popup-content p { font-size: 0.85rem; margin-bottom: 10px; color: #333; text-align: center; }

        #fullscreen-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; z-index: 9999; }
        #fullscreen-overlay img { max-width: 95%; max-height: 90%; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        #map.fullscreen { position: fixed !important; top: 0; left: 0; width: 100vw !important; height: 100vh !important; z-index: 9000 !important; }
        #fullscreen-btn { position: absolute; top: 15px; right: 15px; background: #2563EB; color: white; border: none; border-radius: 8px; padding: 8px 12px; font-size: 14px; cursor: pointer; z-index: 9500; box-shadow: 0 3px 10px rgba(0,0,0,0.3); transition: background 0.2s ease; }
        #fullscreen-btn:hover { background: #1e40af; }
    </style>
</head>
<body>

<button class="open-btn" onclick="toggleSidebar()"><i class="bi bi-list"></i></button>

<div id="sidebar" class="sidebar">
    <a th:href="@{/}"><i class="bi bi-house-fill"></i> Home</a>
    <a th:href="@{/faq}"><i class="bi bi-info-circle-fill"></i> FAQ</a>
    <a th:href="@{/contato}"><i class="bi bi-envelope-fill"></i> Contato</a>
</div>

<div id="main" class="main">
    <h1>OxeMaps!</h1>
    <div class="description">Mapa de Itamarac√°</div>

    <div id="map"></div>
    <button id="fullscreen-btn" onclick="toggleMapFullscreen()">üó∫Ô∏è Tela Cheia</button>
</div>

<div id="fullscreen-overlay" onclick="closeImage()">
    <img id="fullscreen-img" src="">
</div>

<footer class="footer mt-5">
    <div class="container text-center py-3">
        <p>¬© 2025 OxeMaps. Todos os direitos reservados.</p>
    </div>
</footer>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-ajax/dist/leaflet.ajax.min.js"></script>

<script>
    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('active');
        document.getElementById('main').classList.toggle('active');
    }

    var map = L.map('map', { zoom: 13 });

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '¬© OpenStreetMap contributors' }).addTo(map);

    var itamaraca = new L.GeoJSON.AJAX('/cidades/itamaraca.geojson', {
        style: feature => ({ color: 'green', weight: 2, opacity: 1, fillColor: 'green', fillOpacity: 0.2 })
    }).addTo(map).on('data:loaded', function() {
        map.fitBounds(this.getBounds());
        map.setMaxBounds(this.getBounds());
    });

    // Coordenadas do Forte Orange Itamarac√°
    var forteCoords = [-7.8107, -34.8394];
    var markerForte = L.marker(forteCoords).addTo(map);
    var popupContent = `
    <div style="text-align:center;">
        <h5>Forte Orange</h5>
        <p style="font-size:12px; margin-bottom:8px;">Constru√≠do em <b>1631</b>, marco hist√≥rico da Ilha de Itamarac√°.</p>
        <img src="/media/itamaraca/forte-orange/forte-orange.jpg" style="width:100%; border-radius:8px; margin-bottom:6px;">
        <a href="/itamaraca/forte-orange" style="display:inline-block; padding:6px 10px; background:#2563EB; color:#fff; border-radius:6px; text-decoration:none; font-size:12px;">Ver mais</a>
    </div>
    `;
    markerForte.bindPopup(popupContent);

    function openImage(src) {
        document.getElementById('fullscreen-img').src = src;
        document.getElementById('fullscreen-overlay').style.display = 'flex';
    }
    function closeImage() { document.getElementById('fullscreen-overlay').style.display = 'none'; }

    function toggleMapFullscreen() {
        var mapEl = document.getElementById("map");
        mapEl.classList.toggle("fullscreen");
        setTimeout(() => map.invalidateSize(), 300);
    }

    // Coordenadas da Embaixada da Ciranda Lia - Itamarac√°
    var cirandaCoords = [-7.731840, -34.826047];
    var markerCiranda = L.marker(cirandaCoords).addTo(map);

    var popupCiranda = `
    <div style="text-align:center;">
        <h5>Embaixada da Ciranda Lia</h5>
        <p style="font-size:12px; margin-bottom:8px;">
            Espa√ßo cultural dedicado √† mem√≥ria e √† tradi√ß√£o da ciranda, centrado na figura de Lia de Itamarac√°.
        </p>
        <img src="/media/itamaraca/embaixada-ciranda-lia/embaixada1.jpg"
             style="width:100%; border-radius:8px; margin-bottom:6px;"
             onclick="openImage(this.src)">
        <a href="/itamaraca/embaixada-ciranda-lia"
           style="display:inline-block; padding:6px 10px; background:#2563EB; color:#fff; border-radius:6px; text-decoration:none; font-size:12px;">
           Ver mais
        </a>
    </div>
    `;
    markerCiranda.bindPopup(popupCiranda);

    function openImage(src) {
        document.getElementById('fullscreen-img').src = src;
        document.getElementById('fullscreen-overlay').style.display = 'flex';
    }
    function closeImage() { document.getElementById('fullscreen-overlay').style.display = 'none'; }

    function toggleMapFullscreen() {
        var mapEl = document.getElementById("map");
        mapEl.classList.toggle("fullscreen");
        setTimeout(() => map.invalidateSize(), 300);
    }

    // Coordenadas da Igreja de Bom Jesus dos Passos - Itamarac√°
    var bomJesusCoords = [-7.7295577, -34.8265469];
    var markerBomJesus = L.marker(bomJesusCoords).addTo(map);

    var popupBomJesus = `
    <div style="text-align:center;">
        <h5>Igreja de Bom Jesus dos Passos</h5>
        <p style="font-size:12px; margin-bottom:8px;">
            Constru√≠da no per√≠odo colonial, √© um importante patrim√¥nio religioso e hist√≥rico de Itamarac√°,
            conhecida por sua arquitetura e relev√¢ncia cultural para a comunidade local.
        </p>
        <img src="/media/itamaraca/igreja-bom-jesus-dos-passos/igreja1.jpg"
             style="width:100%; border-radius:8px; margin-bottom:6px;"
             onclick="openImage(this.src)">
        <a href="/itamaraca/igreja-bom-jesus-dos-passos"
           style="display:inline-block; padding:6px 10px; background:#2563EB; color:#fff; border-radius:6px; text-decoration:none; font-size:12px;">
           Ver mais
        </a>
    </div>
    `;
    markerBomJesus.bindPopup(popupBomJesus);

    function openImage(src) {
        document.getElementById('fullscreen-img').src = src;
        document.getElementById('fullscreen-overlay').style.display = 'flex';
    }
    function closeImage() { document.getElementById('fullscreen-overlay').style.display = 'none'; }

    function toggleMapFullscreen() {
        var mapEl = document.getElementById("map");
        mapEl.classList.toggle("fullscreen");
        setTimeout(() => map.invalidateSize(), 300);
    }

    // Coordenadas da Praia de Jaguaribe (Itamarac√°)
    var jaguaribeCoords = [-7.7307019, -34.8263975];
    var markerJaguaribe = L.marker(jaguaribeCoords).addTo(map);

    var popupJaguaribe = `
    <div style="text-align:center;">
        <h5>Praia de Jaguaribe</h5>
        <p style="font-size:12px; margin-bottom:8px;">
            Uma das praias mais conhecidas da Ilha de Itamarac√°, famosa por suas √°guas calmas e areias extensas,
            ideal para banho, passeios e atividades de lazer.
        </p>
        <img src="/media/itamaraca/praia-jaguaribe/praia1.jpg"
             style="width:100%; border-radius:8px; margin-bottom:6px;"
             onclick="openImage(this.src)">
        <a href="/itamaraca/praia-jaguaribe"
           style="display:inline-block; padding:6px 10px; background:#2563EB; color:#fff; border-radius:6px; text-decoration:none; font-size:12px;">
           Ver mais
        </a>
    </div>
    `;
    markerJaguaribe.bindPopup(popupJaguaribe);

    // Fun√ß√µes para abrir imagem em fullscreen
    function openImage(src) {
        document.getElementById('fullscreen-img').src = src;
        document.getElementById('fullscreen-overlay').style.display = 'flex';
    }
    function closeImage() { document.getElementById('fullscreen-overlay').style.display = 'none'; }

    function toggleMapFullscreen() {
        var mapEl = document.getElementById("map");
        mapEl.classList.toggle("fullscreen");
        setTimeout(() => map.invalidateSize(), 300);
    }

    // Coordenadas do Pontal de Jaguaribe - Itamarac√°
    var pontalCoords = [-7.7249879, -34.8282226];
    var markerPontal = L.marker(pontalCoords).addTo(map);

    var popupPontal = `
    <div style="text-align:center;">
        <h5>Pontal de Jaguaribe</h5>
        <p style="font-size:12px; margin-bottom:8px;">
            √Årea tranquila e panor√¢mica da Ilha de Itamarac√°, ideal para contempla√ß√£o e passeios de barco.
        </p>
        <img src="/media/itamaraca/pontal-jaguaribe/mangue2.jpg"
             style="width:100%; border-radius:8px; margin-bottom:6px;"
             onclick="openImage(this.src)">
        <a href="/itamaraca/pontal-jaguaribe"
           style="display:inline-block; padding:6px 10px; background:#2563EB; color:#fff;
                  border-radius:6px; text-decoration:none; font-size:12px;">Ver mais</a>
    </div>
    `;

    markerPontal.bindPopup(popupPontal);

    function openImage(src) {
        document.getElementById('fullscreen-img').src = src;
        document.getElementById('fullscreen-overlay').style.display = 'flex';
    }

    function closeImage() {
        document.getElementById('fullscreen-overlay').style.display = 'none';
    }

    function toggleMapFullscreen() {
        var mapEl = document.getElementById("map");
        mapEl.classList.toggle("fullscreen");
        setTimeout(() => map.invalidateSize(), 300);
    }
</script>
</body>
</html>